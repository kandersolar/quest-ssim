<SSimScreen>:
    name: 'ssim'
    bus_list: bus_list
    BoxLayout:
        orientation: "vertical"

        Label:
            text: "Project Name"

        TextInput:
            text: "unnamed"
            multiline: False

        Button:
            text: "select grid model"
            on_press: root.select_grid_model()

        Button:
            text: "select storage"
            on_press: root.open_der_configuration()

        Button:
            text: "configure loads"
            on_press: root.open_load_configuration()

        Button:
            text: "configure metrics"
            on_press: root.open_metric_configuration()

        Button:
            text: "Run"
            on_press: root.do_run_simulation()

        TextInput:
            id: bus_list
            multiline: True

<DERConfigurationScreen>:
    name: "der-config"

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "horizontal"
            padding: 5
            height: 1.0

            BoxLayout:
                orientation: "vertical"
                padding: 5
                height: 0.95

                ScrollView:
                    size_hint: (1.0, 0.8)
                    MDList:
                        id: ess_list

                Button:
                    size_hint: (1.0, 0.1)
                    text: "New Storage"
                    on_press: root.new_storage()

                Button:
                    size_hint: (1.0, 0.1)
                    text: "Delete Storage"

            Button:
                text: "list of PV"


        BoxLayout:
            orientation: "horizontal"
            padding: 5
            spacing: 5

            Button:
                height: 10
                text: "back"
                on_press: root.manager.current = 'ssim'

            Button:
                height: 10
                text: "save"
                # Might need something different here to handle the
                on_press: root.manager.current = 'ssim'


<BusListitem>:

    LeftCheckBox:
        id: selected


<StorageConfigurationScreen>:
    name: "configure-storage"

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "horizontal"

            BoxLayout:
                orientation: "vertical"

                Label:
                    text: "device name"
                    color: "black"

                TextInput:
                    text: root.ess.name
                    on_text: root.ess.name = self.text
                    multiline: False

                Label:
                    text: "device power (kW)"
                    color: "black"

                BoxLayout:
                    orientation: "horizontal"

                    BoxLayout:
                        orientation: "vertical"

                        TextInput:
                            text: ""

                        Button:
                            text: "add power option"
                            # on_release: root.add_power()

                ScrollView:
                    MDList:
                        id: size_list

            ScrollView:
                MDList:
                    id: bus_list

        BoxLayout:
            size_hint: (1.0, 0.05)
            orientation: "horizontal"
            Button:
                text: "back"
                on_press: root.cancel()

            Button:
                text: "save"
                on_press: root.save()


<LoadConfigurationScreen>:
    name: "load-config"

    BoxLayout:
        orientation: "vertical"

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'

<MetricConfigurationScreen>:
    name: "metric-config"

    BoxLayout:
        orientation: "vertical"

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'

<RunSimulationScreen>:
    name: "run-sim"

    BoxLayout:
        orientation: "vertical"

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'


<SelectGridDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "."
            filters: ["*.dss"]

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)
