<SSimScreen>:
    name: 'ssim'
    bus_list: bus_list
    BoxLayout:
        orientation: "vertical"

        Label:
            text: "Project Name"

        TextInput:
            text: "unnamed"
            multiline: False

        Button:
            text: "select grid model"
            on_press: root.select_grid_model()

        Button:
            text: "select storage"
            on_press: root.open_der_configuration()

        Button:
            text: "configure loads"
            on_press: root.open_load_configuration()

        Button:
            text: "configure metrics"
            on_press: root.open_metric_configuration()

        Button:
            text: "Run"
            on_press: root.do_run_simulation()

        TextInput:
            id: bus_list
            multiline: True

<DERConfigurationScreen>:
    name: "der-config"

    BoxLayout:
        orientation: "vertical"    

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'

        Button:
            text: "save"
            on_press: root.save_config()

<LoadConfigurationScreen>:
    name: "load-config"

    BoxLayout:
        orientation: "vertical"    

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'

<MetricConfigurationScreen>:
    name: "metric-config"

    BoxLayout:
        orientation: "vertical"    

        Button:
            text: "back"
            on_press: root.manager.current = 'ssim'

<RunSimulationScreen>:
    name: "run-sim"

    BoxLayout:
        orientation: "vertical"   

        BoxLayout:
            orientation: "horizontal"
            padding: 5

            BoxLayout:
                orientation: "vertical"
                padding: 5
                Label:
                    text: "Configurations that will be evaluated:"
                    size_hint_y: None
                    height: 50
                ConfigScroller:
                    id: config_list

            BoxLayout:
                orientation: "vertical"
                padding: 5
                spacing: 5
                Label:
                    text: "Total number of configurations 256 (128 completed)"
                    size_hint_y: None
                    height: 50
                Button: 
                    text: "View Saved Results"
                Button: 
                    text: "Resume"
                Button:
                    text: "Remove Configuration"
                Button:
                    text: "Go"

        Button:
            text: "back"
            size_hint_y: None
            height: 100
            on_press: root.manager.current = 'ssim'


<SelectableLabel>:
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size


<ConfigScroller>:
    viewclass: 'SelectableLabel'
    SelectableRecycleBoxLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'
        multiselect: True
        touch_multiselect: True


<SelectGridDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "."
            filters: ["*.dss"]

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)